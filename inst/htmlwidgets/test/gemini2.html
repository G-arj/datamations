<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Datamations</title>

    <script src="https://cdn.jsdelivr.net/npm/d3@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@5/build/vega-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.15.1"></script>
    <script src="../gemini/gemini.web.js"></script>
  </head>

  <body>
    <div id="app"></div>

    <script src="../js/penguins.js"></script>
    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/layout.js"></script>
    <script src="../js/hack-facet-view.js"></script>
    <script src="../js/custom-animations.js"></script>
    <script src="../js/app.js"></script>
    <script>
      // // initial
      // const spec1 = {
      //   $schema: "https://vega.github.io/schema/vega-lite/v4.json",
      //   width: 120,
      //   data: {
      //     name: "source",
      //     values: [
      //       { x: "Set 1", y: 1 },
      //       { x: "Set 1", y: 3 },
      //       { x: "Set 1", y: 4 },
      //       { x: "Set 1", y: 5 },
      //       { x: "Set 1", y: 6 },
      //       { x: "Set 1", y: 7 },
      //       { x: "Set 1", y: 8 },
      //       { x: "Set 1", y: 9 },
      //       { x: "Set 1", y: 13 },
      //       { x: "Set 1", y: 15 },
      //       { x: "Set 2", y: 1 },
      //       { x: "Set 2", y: 2 },
      //       { x: "Set 2", y: 3 },
      //       { x: "Set 2", y: 5 },
      //       { x: "Set 2", y: 7 },
      //       { x: "Set 2", y: 7.5 },
      //       { x: "Set 2", y: 8 },
      //       { x: "Set 2", y: 8.2 },
      //       { x: "Set 2", y: 10 },
      //       { x: "Set 2", y: 13 },
      //       { x: "Set 2", y: 14 },
      //       { x: "Set 2", y: 16 },
      //       { x: "Set 2", y: 18 },
      //     ],
      //   },
      //   name: "main",
      //   mark: { type: "circle", size: 50 },
      //   encoding: {
      //     x: { field: "x", type: "nominal" },
      //     y: {
      //       field: "y",
      //       type: "quantitative",
      //       scale: { domain: [0, 20] },
      //     },
      //   },
      // };

      // // stack sets
      // const spec2 = {
      //   $schema: "https://vega.github.io/schema/vega-lite/v4.json",
      //   width: 120,
      //   data: {
      //     name: "source",
      //     values: [
      //       { x: "Set 1", y: 1 },
      //       { x: "Set 1", y: 2 },
      //       { x: "Set 1", y: 3 },
      //       { x: "Set 1", y: 4 },
      //       { x: "Set 1", y: 5 },
      //       { x: "Set 1", y: 6 },
      //       { x: "Set 1", y: 7 },
      //       { x: "Set 1", y: 8 },
      //       { x: "Set 1", y: 9 },
      //       { x: "Set 1", y: 10 },
      //       { x: "Set 2", y: 1 },
      //       { x: "Set 2", y: 2 },
      //       { x: "Set 2", y: 3 },
      //       { x: "Set 2", y: 4 },
      //       { x: "Set 2", y: 5 },
      //       { x: "Set 2", y: 6 },
      //       { x: "Set 2", y: 7 },
      //       { x: "Set 2", y: 8 },
      //       { x: "Set 2", y: 9 },
      //       { x: "Set 2", y: 10 },
      //       { x: "Set 2", y: 11 },
      //       { x: "Set 2", y: 12 },
      //       { x: "Set 2", y: 13 },
      //     ],
      //   },
      //   mark: { type: "circle", size: 50 },
      //   name: "main",
      //   encoding: {
      //     x: { field: "x", type: "nominal" },
      //     y: {
      //       field: "y",
      //       type: "quantitative",
      //       scale: { domain: [0, 20] },
      //       axis: null,
      //     },
      //   },
      // };

      // // put rules (lines) using aggregate count
      // const spec3 = {
      //   $schema: "https://vega.github.io/schema/vega-lite/v4.json",
      //   width: 120,
      //   data: {
      //     name: "source",
      //     values: [
      //       { x: "Set 1", y: 1 },
      //       { x: "Set 1", y: 2 },
      //       { x: "Set 1", y: 3 },
      //       { x: "Set 1", y: 4 },
      //       { x: "Set 1", y: 5 },
      //       { x: "Set 1", y: 6 },
      //       { x: "Set 1", y: 7 },
      //       { x: "Set 1", y: 8 },
      //       { x: "Set 1", y: 9 },
      //       { x: "Set 1", y: 10 },
      //       { x: "Set 2", y: 1 },
      //       { x: "Set 2", y: 2 },
      //       { x: "Set 2", y: 3 },
      //       { x: "Set 2", y: 4 },
      //       { x: "Set 2", y: 5 },
      //       { x: "Set 2", y: 6 },
      //       { x: "Set 2", y: 7 },
      //       { x: "Set 2", y: 8 },
      //       { x: "Set 2", y: 9 },
      //       { x: "Set 2", y: 10 },
      //       { x: "Set 2", y: 11 },
      //       { x: "Set 2", y: 12 },
      //       { x: "Set 2", y: 13 },
      //     ],
      //   },
      //   layer: [
      //     {
      //       name: "main",
      //       mark: { type: "circle", size: 50 },
      //       encoding: {
      //         x: { field: "x", type: "nominal" },
      //         y: {
      //           field: "y",
      //           type: "quantitative",
      //           scale: { domain: [0, 20] },
      //           axis: null,
      //         },
      //       },
      //     },
      //     {
      //       transform: [{ filter: "datum.x === 'Set 1'" }],
      //       name: "rule_1",
      //       mark: {
      //         type: "rule",
      //         x: { expr: "width/4-5" },
      //         x2: { expr: "width/4+5" },
      //       },
      //       encoding: {
      //         y: {
      //           field: "y",
      //           type: "quantitative",
      //           aggregate: "count",
      //           axis: null,
      //         },
      //       },
      //     },
      //     {
      //       transform: [{ filter: "datum.x === 'Set 2'" }],
      //       name: "rule_2",
      //       mark: {
      //         type: "rule",
      //         x: { expr: "width/4 + width/2 - 5" },
      //         x2: { expr: "width/4 + width/2 + 5" },
      //       },
      //       encoding: {
      //         y: {
      //           field: "y",
      //           type: "quantitative",
      //           aggregate: "count",
      //           axis: null,
      //         },
      //       },
      //     },
      //   ],
      // };

      // // replace with count bubbles
      // const spec4 = {
      //   $schema: "https://vega.github.io/schema/vega-lite/v4.json",
      //   width: 120,
      //   data: {
      //     name: "source",
      //     values: [
      //       { x: "Set 1", y: 1 },
      //       { x: "Set 1", y: 2 },
      //       { x: "Set 1", y: 3 },
      //       { x: "Set 1", y: 4 },
      //       { x: "Set 1", y: 5 },
      //       { x: "Set 1", y: 6 },
      //       { x: "Set 1", y: 7 },
      //       { x: "Set 1", y: 8 },
      //       { x: "Set 1", y: 9 },
      //       { x: "Set 1", y: 10 },
      //       { x: "Set 2", y: 1 },
      //       { x: "Set 2", y: 2 },
      //       { x: "Set 2", y: 3 },
      //       { x: "Set 2", y: 4 },
      //       { x: "Set 2", y: 5 },
      //       { x: "Set 2", y: 6 },
      //       { x: "Set 2", y: 7 },
      //       { x: "Set 2", y: 8 },
      //       { x: "Set 2", y: 9 },
      //       { x: "Set 2", y: 10 },
      //       { x: "Set 2", y: 11 },
      //       { x: "Set 2", y: 12 },
      //       { x: "Set 2", y: 13 },
      //     ],
      //   },
      //   name: "main",
      //   mark: { type: "circle", size: 50 },
      //   encoding: {
      //     x: { field: "x", type: "nominal" },
      //     y: {
      //       field: "y",
      //       type: "quantitative",
      //       scale: { domain: [0, 20] },
      //       aggregate: "count",
      //     },
      //   },
      // };

      // const sequence = [spec1, spec2, spec3, spec4];

      //   vegaEmbed("#app", sequence[0], {renderer: "svg"})
      //   gemini.recommendForSeq(sequence, { stageN: sequence.length - 1, totalDuration: sequence.length * 750 }).then(async ([ resp ]) => {
      //     const animation = await gemini.animateSequence(sequence, resp.specs.map(d => d.spec));
      //     animation.play("#app");
      //   });
    </script>

    <script>
      const count_source = {
        height: 300,
        width: 300,
        $schema: "https://vega.github.io/schema/vega-lite/v4.json",
        meta: {
          parse: "grid",
          description: "Group by Degree",
          splitField: "Degree",
          axes: false,
        },
        data: {
          values: [
            {
              Degree: "Masters",
              n: 72,
              gemini_ids: [
                1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
                19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
                35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
                51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,
                67, 68, 69, 70, 71, 72,
              ],
            },
            {
              Degree: "PhD",
              n: 28,
              gemini_ids: [
                73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88,
                89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100,
              ],
            },
          ],
        },
        mark: {
          type: "point",
          filled: true,
          size: 20,
        },
        encoding: {
          x: {
            field: "datamations_x",
            type: "quantitative",
            axis: null,
          },
          y: {
            field: "datamations_y",
            type: "quantitative",
            axis: null,
          },
        },
      };

      const count_target = {
        height: 300,
        width: 300,
        $schema: "https://vega.github.io/schema/vega-lite/v4.json",
        meta: {
          axes: false,
          description: "Plot count of each group",
          custom_animation: "count",
        },
        data: {
          values: [
            {
              gemini_id: 1,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 2,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 3,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 4,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 5,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 6,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 7,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 8,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 9,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 10,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 11,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 12,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 13,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 14,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 15,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 16,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 17,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 18,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 19,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 20,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 21,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 22,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 23,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 24,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 25,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 26,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 27,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 28,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 29,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 30,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 31,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 32,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 33,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 34,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 35,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 36,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 37,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 38,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 39,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 40,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 41,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 42,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 43,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 44,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 45,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 46,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 47,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 48,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 49,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 50,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 51,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 52,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 53,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 54,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 55,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 56,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 57,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 58,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 59,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 60,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 61,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 62,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 63,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 64,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 65,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 66,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 67,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 68,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 69,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 70,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 71,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 72,
              Degree: "Masters",
              datamations_x: 1,
              datamations_y: 72,
              datamations_y_tooltip: 72,
            },
            {
              gemini_id: 73,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 74,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 75,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 76,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 77,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 78,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 79,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 80,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 81,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 82,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 83,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 84,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 85,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 86,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 87,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 88,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 89,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 90,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 91,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 92,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 93,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 94,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 95,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 96,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 97,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 98,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 99,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
            {
              gemini_id: 100,
              Degree: "PhD",
              datamations_x: 2,
              datamations_y: 28,
              datamations_y_tooltip: 28,
            },
          ],
        },
        mark: {
          type: "point",
          filled: true,
          size: 20,
        },
        encoding: {
          x: {
            field: "datamations_x",
            type: "quantitative",
            axis: {
              values: [1, 2],
              labelExpr: "round(datum.label) == 1 ? 'Masters' : 'PhD'",
              labelAngle: -90,
            },
            title: "Degree",
            scale: {
              domain: [0.5, 2.5],
            },
          },
          y: {
            field: "datamations_y",
            type: "quantitative",
            scale: {
              domain: [28, 72],
            },
          },
        },
      };

      async function playIt() {
        const sequence = await CustomAnimations.count(count_source, count_target);

        vegaEmbed("#app", sequence[0], {renderer: "svg"});

        gemini.recommendForSeq(sequence, { stageN: sequence.length - 1, totalDuration: sequence.length * 2000 }).then(async ([ resp ]) => {
          const animation = await gemini.animateSequence(sequence, resp.specs.map(d => d.spec));
          animation.play("#app");
        });
      }

      playIt();
    </script>
  </body>
</html>
